{"version":3,"sources":["webpack:///./src/views/StudentOfficeHour.vue?4187","webpack:///src/views/StudentOfficeHour.vue","webpack:///./src/views/StudentOfficeHour.vue?a885","webpack:///./src/views/StudentOfficeHour.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","on","$event","preventDefault","startQueue","apply","arguments","_s","classNumber","className","TAName","directives","name","rawName","value","expression","domProps","target","composing","userQuestion","queueIndex","meetingLink","staticStyle","_e","quitQueue","staticRenderFns","mounted","beforeDestroy","clearInterval","destroyed","data","isQuit","userId","TAId","classId","officehourId","startQ","isActive","isQueue","timer","alreadyinqueue","alreadyotherqueue","methods","headers","console","alert","getCookie","cname","c","component"],"mappings":"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","file":"js/chunk-2d0bd90c.6297da7a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('button',{staticClass:\"btn btn-warning btn-md my-2 btn-block\"},[_c('router-link',{attrs:{\"to\":'/StudentHome'}},[_vm._v(\"Return\")])],1),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.startQueue.apply(null, arguments)}}},[_c('div',{staticClass:\"form-group row\"},[_c('div',{staticClass:\"col-sm-10\"},[_vm._v(\"Class Number: \"+_vm._s(_vm.classNumber))]),_c('div',{staticClass:\"col-sm-10\"},[_vm._v(\"Class Name: \"+_vm._s(_vm.className))]),_c('div',{staticClass:\"col-sm-10\"},[_vm._v(\"TA Name: \"+_vm._s(_vm.TAName))]),_c('div',{staticClass:\"col-sm-10\"},[_c('label',{staticClass:\"form-label\",attrs:{\"for\":\"exampleFormControlTextarea1\"}},[_vm._v(\"Question:\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userQuestion),expression:\"userQuestion\"}],staticClass:\"form-control\",attrs:{\"id\":\"exampleFormControlTextarea1\",\"rows\":\"3\"},domProps:{\"value\":(_vm.userQuestion)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.userQuestion=$event.target.value}}})]),_c('div',{staticClass:\"col-sm-10\"},[_vm._v(\"The position of queueing: \"+_vm._s(_vm.queueIndex))]),_c('div',{staticClass:\"col-sm-10\"},[_vm._v(\"Meeting Link: \"+_vm._s(_vm.meetingLink))]),_c('div',{staticClass:\"col-sm-10\"},[(_vm.isQueue)?_c('button',{staticClass:\"btn btn-warning btn-md my-2 btn-block\",staticStyle:{\"margin-top\":\"10px\",\"margin-right\":\"20px\"},attrs:{\"type\":\"submit\"}},[_vm._v(\"Queue\")]):_vm._e(),_c('button',{staticClass:\"btn btn-warning btn-md my-2 btn-block\",staticStyle:{\"margin-top\":\"10px\"},attrs:{\"type\":\"quit\"},on:{\"click\":_vm.quitQueue}},[_c('router-link',{attrs:{\"to\":\"/StudentHome\"}},[_vm._v(\"Quit\")])],1)])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"container\">\n        <button class=\"btn btn-warning btn-md my-2 btn-block\"  > \n                <router-link :to=\"'/StudentHome'\">Return</router-link>\n    </button>\n       <div class=\"row\">\n           <div class=\"col\">\n               <form @submit.prevent=\"startQueue\">\n                    <div class=\"form-group row\">\n                        <!-- <label for=\"staticClassNumber\" class=\"col-sm-2 col-form-label\">Class Number</label> -->\n                        <div class=\"col-sm-10\">Class Number: {{classNumber}}</div>\n                            <!-- <input type=\"text\" readonly class=\"form-control-plaintext\" id=\"staticClassNumber\" value={{classNumber}}> -->\n                        \n                        <!-- <label for=\"staticClassName\" class=\"col-sm-2 col-form-label\">Class Name</label> -->\n                        <div class=\"col-sm-10\">Class Name: {{className}}</div>\n                            <!-- <input type=\"text\" readonly class=\"form-control-plaintext\" id=\"staticClassName\" value={{className}}> -->\n                        <!-- <label for=\"staticTA\" class=\"col-sm-2 col-form-label\">TA</label> -->\n                        <div class=\"col-sm-10\">TA Name: {{TAName}}</div>\n                        <!-- <div class=\"col-sm-10\">Qestion: {{userQuestion}}</div> -->\n                            <!-- <input type=\"text\" readonly class=\"form-control-plaintext\" id=\"staticClassNumber\" value={{TAName}}> -->\n                        <div class=\"col-sm-10\">\n                            <label for=\"exampleFormControlTextarea1\" class=\"form-label\">Question:</label>\n                            <textarea class=\"form-control\" id=\"exampleFormControlTextarea1\" rows=\"3\" v-model=\"userQuestion\"></textarea>\n                        </div>\n                        \n                        <div class=\"col-sm-10\">The position of queueing: {{queueIndex}}</div>\n                        <div class=\"col-sm-10\">Meeting Link: {{meetingLink}}</div>\n                        <div class=\"col-sm-10\">\n                        <button type=\"submit\" class=\"btn btn-warning btn-md my-2 btn-block\" style=\"margin-top:10px; margin-right:20px\" v-if=\"isQueue\">Queue</button>\n                        <button type=\"quit\" class=\"btn btn-warning btn-md my-2 btn-block\" style=\"margin-top:10px\"  @click=\"quitQueue\">\n                            <router-link to= \"/StudentHome\">Quit</router-link>\n                        </button>\n                    </div>\n                    </div>\n                </form>\n           </div>\n          \n       </div>\n    </div>\n</template>\n<script>\nimport axios from 'axios';\nexport default {\n\n    mounted: function() {\n        // this.officehourInfo();\n        // window.setInterval(() => {\n        //     this.getLength()\n        //     }, 5000)\n\n        this.timer = setInterval (() => {\n            // if(this.isActive == true){\n                this.officehourInfo()\n            // }\n        }, 1000)\n                 \n    },\n    beforeDestroy(){\n        clearInterval(this.timer);\n        this.timer = null;\n    },\n    destroyed() {\n        clearInterval(this.timer);\n        this.timer = null;\n    },\n\n    // function quit(params) {\n        \n    // }\n\n    data(){\n        return{\n            // isQueue: false,\n            isQuit: false,\n            userId: getCookie('id'),\n            TAName: '',\n            TAId: '',\n            classNumber: '',\n            meetingLink: '',\n            queueIndex: '',\n            className: '',\n            classId : this.$route.params.classId,\n            officehourId: '',\n            startQ: '',\n            isActive: false,\n            userQuestion: '',\n            isQueue: true,\n            timer: null,\n            alreadyinqueue: false,\n            alreadyotherqueue: false,\n            // isActive: false\n        }\n    },\n    // created(){\n    //     this.handleQueue()\n    // },\n    methods:{\n\n        async officehourInfo(){\n            var data = { \n                classId: this.classId,\n                userId: this.userId\n            }\n            const response = await axios.post('http://100.25.219.17/api/user/student/officehour/display',data,{headers: {'Content-type' : 'application/json',}});\n            console.log(\"get class info\",response.data)\n            console.log(\"post data\", data)\n            this.startQ= response.data.isinQueue\n            this.isActive = response.data.isActive\n            // console.log(\"isActive\", this.isActive)\n            if(this.isActive == true && this.startQ == false)\n            {\n                this.className = response.data.CLASS_NAME;\n                this.classId = response.data.CLASS_ID;\n                this.classNumber = response.data.CLASS_NUMBER;\n                this.TAName = response.data.TA_NAME;\n                this.TAId = response.data.TA_ID;\n                this.officehourId = response.data.OFFICE_HOUR_ID;\n                // this.queueIndex = response.data.QUEUE_INDEX;\n                // this.meetingLink = response.data.MEETING_LINK;\n            }\n            else if(this.isActive == true && this.startQ == true)\n            {\n                this.className = response.data.CLASS_NAME;\n                this.classId = response.data.CLASS_ID;\n                this.classNumber = response.data.CLASS_NUMBER;\n                this.TAName = response.data.TA_NAME;\n                this.TAId = response.data.TA_ID;\n                this.officehourId = response.data.OFFICE_HOUR_ID;\n                this.queueIndex = response.data.QUEUE_INDEX;\n                this.meetingLink = response.data.MEETING_LINK;\n            }\n            else{\n                this.className = response.data.CLASS_NAME;\n                this.classId = response.data.CLASS_ID;\n                this.classNumber = response.data.CLASS_NUMBER;\n                alert(\"Thereâ€™s no office hour now\")\n            }\n\n        },\n\n        async startQueue() {\n            var data = { \n                classId: this.classId,\n                userId: this.userId,\n                userQuestion: this.userQuestion\n            }\n            const response = await axios.post('http://100.25.219.17/api/user/student/officehour/join',data,{headers: {'Content-type' : 'application/json',}});\n            // console.log(\"This is a test point\");\n            console.log(\"office_hour_join\",response.data);\n            this.startQ = response.data.isinQueue;\n            this.className = response.data.CLASS_NAME;\n            this.classId = response.data.CLASS_ID;\n            this.classNumber = response.data.CLASS_NUMBER;\n            this.TAName = response.data.TA_NAME;\n            this.TAId = response.data.TA_ID;\n            this.officehourId = response.data.OFFICE_HOUR_ID;\n            this.queueIndex = response.data.QUEUE_INDEX;\n            this.isQueue = false;\n            this.alreadyinqueue = response.data.AlreadyInThisQueue;\n            this.alreadyotherqueue = response.data.AlreadyInOtherQueue;\n            if(this.alreadyinqueue == true){\n                alert(\"You have already been in the queue. \")\n            }\n            if(this.alreadyotherqueue == true){\n                alert(\"You have already been in other queue.\")\n            }\n            // this.isActive = response.isActive\n        },\n        // async getLength() {\n        //     var data = {\n        //         classId: this.classId,\n        //         userId: this.userId,\n        //         officehourId: this.officehourId\n        //     }\n        //     // test officehour id\n        //     console.log(\"data\", data)\n        //     const response = await axios.post('http://100.25.219.17/api/user/student/officehour/inqueue',data,{headers: {'Content-type' : 'application/json',}});\n        //     this.startQ = response.data.isinQueue;\n        //     console.log(response.data.isinQueue);\n        //     // if(this.isActive == false)\n        //     // {\n        //     //     console.log('canno')\n        //     // }\n        //     if(this.startQ == true){\n        //         console.log(\"In the queue\");\n        //         this.queueIndex = response.data.QUEUE_INDEX;\n        //         this.meetingLink = response.data.MEETING_LINK;\n        //     }\n        //     else{\n        //         console.log(\"Not in the queue\");\n        //         this.queueIndex = response.data.QUEUE_INDEX;\n        //         // this.meetingLink = response.data.MEETING_LINK\n        //     }     \n        // },\n\n        async quitQueue() {\n            var data = { \n                classId: this.classId,\n                userId: this.userId,\n                officehourId: this.officehourId\n            }\n            // isQuit: true => quit successfully\n            // isQuit: false =>something error\n            const response = await axios.post('http://100.25.219.17/api/user/student/officehour/quit',data,{headers: {'Content-type' : 'application/json',}});\n            console.log(\"quit info\",response.data)\n            this.isQuit = response.data.isQuit;\n            this.isQueue = true;\n            if(this.isQuit == true || this.isActive == false)\n            {\n                console.log(\"quit successfully\");\n                alert(\"Quit successfully\");\n            }\n            else {\n                console.log(\"Something wrong\");\n                alert(\"Something wrong\");\n            }\n        }\n    }\n    \n};\nfunction getCookie(cname){\n    let name = cname + \"=\";\n    let decodeCookie = decodeURIComponent(document.cookie);\n    let ca = decodeCookie.split(';');\n    for(let i = 0; i < ca.length; i++){\n        let c = ca[i];\n        while(c.charAt(0) == ' '){\n        c = c.substring(1);\n        }\n        if(c.indexOf(name) == 0){\n        return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n</script>\n\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StudentOfficeHour.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StudentOfficeHour.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StudentOfficeHour.vue?vue&type=template&id=e9fb57e2&\"\nimport script from \"./StudentOfficeHour.vue?vue&type=script&lang=js&\"\nexport * from \"./StudentOfficeHour.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}