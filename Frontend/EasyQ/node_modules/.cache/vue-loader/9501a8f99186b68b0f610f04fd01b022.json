{"remainingRequest":"/Users/xushuoni/Desktop/copy_web/Frontend/EasyQ/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xushuoni/Desktop/copy_web/Frontend/EasyQ/src/views/StudentOfficeHour.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xushuoni/Desktop/copy_web/Frontend/EasyQ/src/views/StudentOfficeHour.vue","mtime":1647971541261},{"path":"/Users/xushuoni/Desktop/copy_web/Frontend/EasyQ/node_modules/cache-loader/dist/cjs.js","mtime":1647971536847},{"path":"/Users/xushuoni/Desktop/copy_web/Frontend/EasyQ/node_modules/babel-loader/lib/index.js","mtime":1647971536606},{"path":"/Users/xushuoni/Desktop/copy_web/Frontend/EasyQ/node_modules/cache-loader/dist/cjs.js","mtime":1647971536847},{"path":"/Users/xushuoni/Desktop/copy_web/Frontend/EasyQ/node_modules/vue-loader/lib/index.js","mtime":1647971540902}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKCiAgICBtb3VudGVkOiBmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLm9mZmljZWhvdXJJbmZvKCk7CiAgICAgICAgLy8gd2luZG93LnNldEludGVydmFsKCgpID0+IHsKICAgICAgICAvLyAgICAgdGhpcy5nZXRMZW5ndGgoKQogICAgICAgIC8vICAgICB9LCA1MDAwKQoKICAgICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwgKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5nZXRMZW5ndGgoKQogICAgICAgIH0sIDEwMDApCiAgICAgICAgICAgICAgICAgCiAgICB9LAogICAgYmVmb3JlRGVzdHJveSgpewogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICAgICAgdGhpcy50aW1lciA9IG51bGw7CiAgICB9LAogICAgZGVzdHJveWVkKCkgewogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICAgICAgdGhpcy50aW1lciA9IG51bGw7CiAgICB9LAoKICAgIC8vIGZ1bmN0aW9uIHF1aXQocGFyYW1zKSB7CiAgICAgICAgCiAgICAvLyB9CgogICAgZGF0YSgpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgLy8gaXNRdWV1ZTogZmFsc2UsCiAgICAgICAgICAgIGlzUXVpdDogZmFsc2UsCiAgICAgICAgICAgIHVzZXJJZDogZ2V0Q29va2llKCdpZCcpLAogICAgICAgICAgICBUQU5hbWU6ICcnLAogICAgICAgICAgICBUQUlkOiAnJywKICAgICAgICAgICAgY2xhc3NOdW1iZXI6ICcnLAogICAgICAgICAgICBtZWV0aW5nTGluazogJycsCiAgICAgICAgICAgIHF1ZXVlSW5kZXg6ICcnLAogICAgICAgICAgICBjbGFzc05hbWU6ICcnLAogICAgICAgICAgICBjbGFzc0lkIDogdGhpcy4kcm91dGUucGFyYW1zLmNsYXNzSWQsCiAgICAgICAgICAgIG9mZmljZWhvdXJJZDogJycsCiAgICAgICAgICAgIHN0YXJ0UTogJycsCiAgICAgICAgICAgIGlzQWN0aXZlOiBmYWxzZSwKICAgICAgICAgICAgdXNlclF1ZXN0aW9uOiAnJywKICAgICAgICAgICAgaXNRdWV1ZTogdHJ1ZSwKICAgICAgICAgICAgdGltZXI6IG51bGwKICAgICAgICB9CiAgICB9LAogICAgLy8gY3JlYXRlZCgpewogICAgLy8gICAgIHRoaXMuaGFuZGxlUXVldWUoKQogICAgLy8gfSwKICAgIG1ldGhvZHM6ewoKICAgICAgICBhc3luYyBvZmZpY2Vob3VySW5mbygpewogICAgICAgICAgICB2YXIgZGF0YSA9IHsgCiAgICAgICAgICAgICAgICBjbGFzc0lkOiB0aGlzLmNsYXNzSWQsCiAgICAgICAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlcklkCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KCdodHRwOi8vNTQuMTYzLjM4LjkzL2FwaS91c2VyL3N0dWRlbnQvb2ZmaWNlaG91ci9kaXNwbGF5JyxkYXRhLHtoZWFkZXJzOiB7J0NvbnRlbnQtdHlwZScgOiAnYXBwbGljYXRpb24vanNvbicsfX0pOwogICAgICAgICAgICBjb25zb2xlLmxvZygiZ2V0IGNsYXNzIGluZm8iLHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICAgIAogICAgICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IHJlc3BvbnNlLmRhdGEuQ0xBU1NfTkFNRTsKICAgICAgICAgICAgdGhpcy5jbGFzc0lkID0gcmVzcG9uc2UuZGF0YS5DTEFTU19JRDsKICAgICAgICAgICAgdGhpcy5jbGFzc051bWJlciA9IHJlc3BvbnNlLmRhdGEuQ0xBU1NfTlVNQkVSOwogICAgICAgICAgICB0aGlzLlRBTmFtZSA9IHJlc3BvbnNlLmRhdGEuVEFfTkFNRTsKICAgICAgICAgICAgdGhpcy5UQUlkID0gcmVzcG9uc2UuZGF0YS5UQV9JRDsKICAgICAgICAgICAgdGhpcy5vZmZpY2Vob3VySWQgPSByZXNwb25zZS5kYXRhLk9GRklDRV9IT1VSX0lEOwogICAgICAgIH0sCgogICAgICAgIGFzeW5jIHN0YXJ0UXVldWUoKSB7CiAgICAgICAgICAgIHZhciBkYXRhID0geyAKICAgICAgICAgICAgICAgIGNsYXNzSWQ6IHRoaXMuY2xhc3NJZCwKICAgICAgICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySWQsCiAgICAgICAgICAgICAgICB1c2VyUXVlc3Rpb246IHRoaXMudXNlclF1ZXN0aW9uCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KCdodHRwOi8vNTQuMTYzLjM4LjkzL2FwaS91c2VyL3N0dWRlbnQvb2ZmaWNlaG91ci9qb2luJyxkYXRhLHtoZWFkZXJzOiB7J0NvbnRlbnQtdHlwZScgOiAnYXBwbGljYXRpb24vanNvbicsfX0pOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiVGhpcyBpcyBhIHRlc3QgcG9pbnQiKTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coInJlcyIscmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIHRoaXMuc3RhcnRRID0gcmVzcG9uc2UuZGF0YS5pc2luUXVldWU7CiAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gcmVzcG9uc2UuZGF0YS5DTEFTU19OQU1FOwogICAgICAgICAgICB0aGlzLmNsYXNzSWQgPSByZXNwb25zZS5kYXRhLkNMQVNTX0lEOwogICAgICAgICAgICB0aGlzLmNsYXNzTnVtYmVyID0gcmVzcG9uc2UuZGF0YS5DTEFTU19OVU1CRVI7CiAgICAgICAgICAgIHRoaXMuVEFOYW1lID0gcmVzcG9uc2UuZGF0YS5UQV9OQU1FOwogICAgICAgICAgICB0aGlzLlRBSWQgPSByZXNwb25zZS5kYXRhLlRBX0lEOwogICAgICAgICAgICB0aGlzLm9mZmljZWhvdXJJZCA9IHJlc3BvbnNlLmRhdGEuT0ZGSUNFX0hPVVJfSUQ7CiAgICAgICAgICAgIHRoaXMucXVldWVJbmRleCA9IHJlc3BvbnNlLmRhdGEuUVVFVUVfSU5ERVg7CiAgICAgICAgICAgIHRoaXMuaXNRdWV1ZSA9IGZhbHNlOwogICAgICAgICAgICAvLyB0aGlzLmlzQWN0aXZlID0gcmVzcG9uc2UuaXNBY3RpdmUKICAgICAgICB9LAogICAgICAgIGFzeW5jIGdldExlbmd0aCgpIHsKICAgICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgICAgICBjbGFzc0lkOiB0aGlzLmNsYXNzSWQsCiAgICAgICAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlcklkLAogICAgICAgICAgICAgICAgb2ZmaWNlaG91cklkOiB0aGlzLm9mZmljZWhvdXJJZAogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHRlc3Qgb2ZmaWNlaG91ciBpZAogICAgICAgICAgICBjb25zb2xlLmxvZygiZGF0YSIsIGRhdGEpCiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdCgnaHR0cDovLzU0LjE2My4zOC45My9hcGkvdXNlci9zdHVkZW50L29mZmljZWhvdXIvaW5xdWV1ZScsZGF0YSx7aGVhZGVyczogeydDb250ZW50LXR5cGUnIDogJ2FwcGxpY2F0aW9uL2pzb24nLH19KTsKICAgICAgICAgICAgdGhpcy5zdGFydFEgPSByZXNwb25zZS5kYXRhLmlzaW5RdWV1ZTsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5pc2luUXVldWUpOwogICAgICAgICAgICBpZih0aGlzLnN0YXJ0USA9PSB0cnVlKXsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJJbiB0aGUgcXVldWUiKTsKICAgICAgICAgICAgICAgIHRoaXMucXVldWVJbmRleCA9IHJlc3BvbnNlLmRhdGEuUVVFVUVfSU5ERVg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJOb3QgaW4gdGhlIHF1ZXVlIik7CiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlSW5kZXggPSByZXNwb25zZS5kYXRhLlFVRVVFX0lOREVYOwogICAgICAgICAgICAgICAgLy8gdGhpcy5tZWV0aW5nTGluayA9IHJlc3BvbnNlLmRhdGEuTUVFVElOR19MSU5LCiAgICAgICAgICAgIH0gICAgIAogICAgICAgIH0sCgogICAgICAgIGFzeW5jIHF1aXRRdWV1ZSgpIHsKICAgICAgICAgICAgdmFyIGRhdGEgPSB7IAogICAgICAgICAgICAgICAgY2xhc3NJZDogdGhpcy5jbGFzc0lkLAogICAgICAgICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXJJZCwKICAgICAgICAgICAgICAgIG9mZmljZWhvdXJJZDogdGhpcy5vZmZpY2Vob3VySWQKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBpc1F1aXQ6IHRydWUgPT4gcXVpdCBzdWNjZXNzZnVsbHkKICAgICAgICAgICAgLy8gaXNRdWl0OiBmYWxzZSA9PnNvbWV0aGluZyBlcnJvcgogICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoJ2h0dHA6Ly81NC4xNjMuMzguOTMvYXBpL3VzZXIvc3R1ZGVudC9vZmZpY2Vob3VyL3F1aXQnLGRhdGEse2hlYWRlcnM6IHsnQ29udGVudC10eXBlJyA6ICdhcHBsaWNhdGlvbi9qc29uJyx9fSk7CiAgICAgICAgICAgIHRoaXMuaXNRdWl0ID0gcmVzcG9uc2UuZGF0YS5pc1F1aXQ7CiAgICAgICAgICAgIHRoaXMuaXNRdWV1ZSA9IHRydWU7CiAgICAgICAgICAgIGlmKHRoaXMuaXNRdWl0ID09IHRydWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJxdWl0IHN1Y2Nlc3NmdWxseSIpOwogICAgICAgICAgICAgICAgYWxlcnQoIlF1aXQgc3VjY2Vzc2Z1bGx5Iik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTb21ldGhpbmcgd3JvbmciKTsKICAgICAgICAgICAgICAgIGFsZXJ0KCJTb21ldGhpbmcgd3JvbmciKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAp9OwpmdW5jdGlvbiBnZXRDb29raWUoY25hbWUpewogICAgbGV0IG5hbWUgPSBjbmFtZSArICI9IjsKICAgIGxldCBkZWNvZGVDb29raWUgPSBkZWNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQuY29va2llKTsKICAgIGxldCBjYSA9IGRlY29kZUNvb2tpZS5zcGxpdCgnOycpOwogICAgZm9yKGxldCBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKXsKICAgICAgICBsZXQgYyA9IGNhW2ldOwogICAgICAgIHdoaWxlKGMuY2hhckF0KDApID09ICcgJyl7CiAgICAgICAgYyA9IGMuc3Vic3RyaW5nKDEpOwogICAgICAgIH0KICAgICAgICBpZihjLmluZGV4T2YobmFtZSkgPT0gMCl7CiAgICAgICAgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWUubGVuZ3RoLCBjLmxlbmd0aCk7CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuICIiOwp9Cg=="},{"version":3,"sources":["StudentOfficeHour.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StudentOfficeHour.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"container\">\n       <div class=\"row\">\n           <div class=\"col\">\n               <form @submit.prevent=\"startQueue\">\n                    <div class=\"form-group row\">\n                        <!-- <label for=\"staticClassNumber\" class=\"col-sm-2 col-form-label\">Class Number</label> -->\n                        <div class=\"col-sm-10\">Class Number: {{classNumber}}</div>\n                            <!-- <input type=\"text\" readonly class=\"form-control-plaintext\" id=\"staticClassNumber\" value={{classNumber}}> -->\n                        \n                        <!-- <label for=\"staticClassName\" class=\"col-sm-2 col-form-label\">Class Name</label> -->\n                        <div class=\"col-sm-10\">Class Name: {{className}}</div>\n                            <!-- <input type=\"text\" readonly class=\"form-control-plaintext\" id=\"staticClassName\" value={{className}}> -->\n                        <!-- <label for=\"staticTA\" class=\"col-sm-2 col-form-label\">TA</label> -->\n                        <div class=\"col-sm-10\">TA Name: {{TAName}}</div>\n                        <!-- <div class=\"col-sm-10\">Qestion: {{userQuestion}}</div> -->\n                            <!-- <input type=\"text\" readonly class=\"form-control-plaintext\" id=\"staticClassNumber\" value={{TAName}}> -->\n                        <div class=\"col-sm-10\">\n                            <label for=\"exampleFormControlTextarea1\" class=\"form-label\">Question:</label>\n                            <textarea class=\"form-control\" id=\"exampleFormControlTextarea1\" rows=\"3\" v-model=\"userQuestion\"></textarea>\n                        </div>\n                        \n                        <div class=\"col-sm-10\">The position of queueing: {{queueIndex}}</div>\n                        <div class=\"col-sm-10\">Meeting Link: {{meetingLink}}</div>\n                        <div class=\"col-sm-10\">\n                        <button type=\"submit\" class=\"btn btn-primary\" style=\"margin-top:10px; margin-right:20px\" v-if=\"isQueue\">Queue</button>\n                        <button type=\"quit\" class=\"btn btn-primary\" style=\"margin-top:10px\"  @click=\"quitQueue\">\n                            <router-link to= \"/StudentHome\">Quit</router-link>\n                        </button>\n                    </div>\n                    </div>\n                </form>\n           </div>\n          \n       </div>\n    </div>\n</template>\n<script>\nimport axios from 'axios';\nexport default {\n\n    mounted: function() {\n        this.officehourInfo();\n        // window.setInterval(() => {\n        //     this.getLength()\n        //     }, 5000)\n\n        this.timer = setInterval (() => {\n            this.getLength()\n        }, 1000)\n                 \n    },\n    beforeDestroy(){\n        clearInterval(this.timer);\n        this.timer = null;\n    },\n    destroyed() {\n        clearInterval(this.timer);\n        this.timer = null;\n    },\n\n    // function quit(params) {\n        \n    // }\n\n    data(){\n        return{\n            // isQueue: false,\n            isQuit: false,\n            userId: getCookie('id'),\n            TAName: '',\n            TAId: '',\n            classNumber: '',\n            meetingLink: '',\n            queueIndex: '',\n            className: '',\n            classId : this.$route.params.classId,\n            officehourId: '',\n            startQ: '',\n            isActive: false,\n            userQuestion: '',\n            isQueue: true,\n            timer: null\n        }\n    },\n    // created(){\n    //     this.handleQueue()\n    // },\n    methods:{\n\n        async officehourInfo(){\n            var data = { \n                classId: this.classId,\n                userId: this.userId\n            }\n            const response = await axios.post('http://54.163.38.93/api/user/student/officehour/display',data,{headers: {'Content-type' : 'application/json',}});\n            console.log(\"get class info\",response.data)\n            \n            this.className = response.data.CLASS_NAME;\n            this.classId = response.data.CLASS_ID;\n            this.classNumber = response.data.CLASS_NUMBER;\n            this.TAName = response.data.TA_NAME;\n            this.TAId = response.data.TA_ID;\n            this.officehourId = response.data.OFFICE_HOUR_ID;\n        },\n\n        async startQueue() {\n            var data = { \n                classId: this.classId,\n                userId: this.userId,\n                userQuestion: this.userQuestion\n            }\n            const response = await axios.post('http://54.163.38.93/api/user/student/officehour/join',data,{headers: {'Content-type' : 'application/json',}});\n            // console.log(\"This is a test point\");\n            // console.log(\"res\",response.data);\n            this.startQ = response.data.isinQueue;\n            this.className = response.data.CLASS_NAME;\n            this.classId = response.data.CLASS_ID;\n            this.classNumber = response.data.CLASS_NUMBER;\n            this.TAName = response.data.TA_NAME;\n            this.TAId = response.data.TA_ID;\n            this.officehourId = response.data.OFFICE_HOUR_ID;\n            this.queueIndex = response.data.QUEUE_INDEX;\n            this.isQueue = false;\n            // this.isActive = response.isActive\n        },\n        async getLength() {\n            var data = {\n                classId: this.classId,\n                userId: this.userId,\n                officehourId: this.officehourId\n            }\n            // test officehour id\n            console.log(\"data\", data)\n            const response = await axios.post('http://54.163.38.93/api/user/student/officehour/inqueue',data,{headers: {'Content-type' : 'application/json',}});\n            this.startQ = response.data.isinQueue;\n            console.log(response.data.isinQueue);\n            if(this.startQ == true){\n                console.log(\"In the queue\");\n                this.queueIndex = response.data.QUEUE_INDEX;\n            }\n            else{\n                console.log(\"Not in the queue\");\n                this.queueIndex = response.data.QUEUE_INDEX;\n                // this.meetingLink = response.data.MEETING_LINK\n            }     \n        },\n\n        async quitQueue() {\n            var data = { \n                classId: this.classId,\n                userId: this.userId,\n                officehourId: this.officehourId\n            }\n            // isQuit: true => quit successfully\n            // isQuit: false =>something error\n            const response = await axios.post('http://54.163.38.93/api/user/student/officehour/quit',data,{headers: {'Content-type' : 'application/json',}});\n            this.isQuit = response.data.isQuit;\n            this.isQueue = true;\n            if(this.isQuit == true)\n            {\n                console.log(\"quit successfully\");\n                alert(\"Quit successfully\");\n            }\n            else{\n                console.log(\"Something wrong\");\n                alert(\"Something wrong\");\n            }\n        }\n    }\n    \n};\nfunction getCookie(cname){\n    let name = cname + \"=\";\n    let decodeCookie = decodeURIComponent(document.cookie);\n    let ca = decodeCookie.split(';');\n    for(let i = 0; i < ca.length; i++){\n        let c = ca[i];\n        while(c.charAt(0) == ' '){\n        c = c.substring(1);\n        }\n        if(c.indexOf(name) == 0){\n        return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n</script>\n\n\n"]}]}