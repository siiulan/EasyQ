{"remainingRequest":"/Users/rextang/Desktop/ECE651/Project/EasyQ/Frontend/EasyQ/node_modules/babel-loader/lib/index.js!/Users/rextang/Desktop/ECE651/Project/EasyQ/Frontend/EasyQ/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/rextang/Desktop/ECE651/Project/EasyQ/Frontend/EasyQ/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/rextang/Desktop/ECE651/Project/EasyQ/Frontend/EasyQ/src/views/StudentAddClassInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/rextang/Desktop/ECE651/Project/EasyQ/Frontend/EasyQ/src/views/StudentAddClassInfo.vue","mtime":1648399895482},{"path":"/Users/rextang/Desktop/ECE651/Project/EasyQ/Frontend/EasyQ/node_modules/cache-loader/dist/cjs.js","mtime":1647973709718},{"path":"/Users/rextang/Desktop/ECE651/Project/EasyQ/Frontend/EasyQ/node_modules/babel-loader/lib/index.js","mtime":1647973709486},{"path":"/Users/rextang/Desktop/ECE651/Project/EasyQ/Frontend/EasyQ/node_modules/cache-loader/dist/cjs.js","mtime":1647973709718},{"path":"/Users/rextang/Desktop/ECE651/Project/EasyQ/Frontend/EasyQ/node_modules/vue-loader/lib/index.js","mtime":1647973716572}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIC8vIG1vdW50ZWQ6IGZ1bmN0aW9uKCl7CiAgLy8gICAgIHRoaXMuZ2V0SW5mbygpOwogIC8vIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlucHV0OiB7CiAgICAgICAgLy8gdGVybTogJycsCiAgICAgICAgY2xhc3NOdW1iZXI6ICcnLAogICAgICAgIGNsYXNzTmFtZTogJycsCiAgICAgICAgaW52aXRhdGlvbkNvZGU6ICcnCiAgICAgIH0sCiAgICAgIC8vIHVzZXJuYW1lOiBnZXRDb29raWUoInVzZXJuYW1lIiksIC8vIGZvciBiYWNrZW5kIHRvIHNhdmUgY2xhc3MgaW5mbwogICAgICBpc1N1Y2Nlc3M6IGZhbHNlLAogICAgICB1c2VySWQ6IGdldENvb2tpZSgiaWQiKSwKICAgICAgY291c2VJZDogdGhpcy4kcm91dGUucGFyYW1zLkNMQVNTX0lECiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGFkZCgpIHsKICAgICAgLy8gdmFyIGRhdGEgPSB7CiAgICAgIC8vICAgICB1c2VySWQ6IHRoaXMuCiAgICAgIC8vIH0KICAgICAgdHJ5IHsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnVzZXJJZCk7IC8vZm9yIHRlc3QKCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KCdodHRwOi8vMTAwLjI1LjIxOS4xNy9hcGkvdXNlci9zdHVkZW50L2FkZGNsYXNzJywgewogICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXJJZCwKICAgICAgICAgIC8vIHRlcm06IHRoaXMuaW5wdXQudGVybSwKICAgICAgICAgIGNsYXNzTnVtYmVyOiB0aGlzLmlucHV0LmNsYXNzTnVtYmVyLAogICAgICAgICAgLy8gY2xhc3NOYW1lOiB0aGlzLmlucHV0LmNsYXNzTmFtZSwKICAgICAgICAgIGludml0YXRpb25Db2RlOiB0aGlzLmlucHV0Lmludml0YXRpb25Db2RlCiAgICAgICAgfSwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CgogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmlzY2xhc3NleGlzdGVkID09IGZhbHNlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnQ2xhc3Mgbm90IGV4aXN0cyEnKTsKICAgICAgICAgIGFsZXJ0KCdDbGFzcyBub3QgZXhpc3RzIScpOwogICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuaXNFbnJvbGxlZCA9PSB0cnVlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdZb3UgaGFzIGJlZW4gZW5yb2xsZWQgaW4gdGhpcyBjbGFzcycpOwogICAgICAgICAgICBhbGVydCgnRW5yb2xsZWQgc3VjY2Vzc2Z1bGx5IScpOwogICAgICAgICAgICB0aGlzLmlzU3VjY2VzcyA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuaXNDb2RlUmlnaHQgPT0gZmFsc2UpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygnV3JvbmcgY29kZScpOwogICAgICAgICAgICAgIGFsZXJ0KCdXcm9uZyBjb2RlIScpOwogICAgICAgICAgICAgIHRoaXMuaXNTdWNjZXNzID0gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICBhbGVydCgnV3JvbmcgcmVxdWVzdCcpOwogICAgICAgIHRoaXMuaXNTdWNjZXNzID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogIH0KfTsKCmZ1bmN0aW9uIGdldENvb2tpZShjbmFtZSkgewogIGxldCBuYW1lID0gY25hbWUgKyAiPSI7CiAgbGV0IGRlY29kZUNvb2tpZSA9IGRlY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5jb29raWUpOwogIGxldCBjYSA9IGRlY29kZUNvb2tpZS5zcGxpdCgnOycpOwoKICBmb3IgKGxldCBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKSB7CiAgICBsZXQgYyA9IGNhW2ldOwoKICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PSAnICcpIHsKICAgICAgYyA9IGMuc3Vic3RyaW5nKDEpOwogICAgfQoKICAgIGlmIChjLmluZGV4T2YobmFtZSkgPT0gMCkgewogICAgICByZXR1cm4gYy5zdWJzdHJpbmcobmFtZS5sZW5ndGgsIGMubGVuZ3RoKTsKICAgIH0KICB9CgogIHJldHVybiAiIjsKfSAvLyB9"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACAA;AACA;AACAC;AACA;AACAC,uBAFA;AAGAC,qBAHA;AAIAC;AAJA,OADA;AAOA;AACAC,sBARA;AASAC,6BATA;AAUAC;AAVA;AAYA,GAjBA;;AAmBAC;AAGA;AAEA;AACA;AACA;AAEA;AACAC,iCADA,CACA;;AACA;AACAH,6BADA;AAEA;AACAJ,6CAHA;AAIA;AACAE;AALA,WAOA;AACAM,mBACA;AACA;AADA;AAFA,SAPA;AAaAD;;AACA,mDACA;AACAA;AACAE;AACA;AACA,SALA,MAOA;AACA,gDACA;AACAF;AACAE;AACA;AACA,WALA,MAMA;AACA,oDACA;AACAF;AACAE;AACA;AACA,aALA,MAMA;AACA;AACA;AACA;AACA;AACA,OA1CA,CA2CA;AACAF;AACAE;AACA;AACA;AACA;AACA;;AA1DA;AAnBA;;AAgFA;AACA;AACA;AACA;;AACA;AACA;;AACA;AACAC;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA,C,CACA","names":["data","input","classNumber","className","invitationCode","isSuccess","userId","couseId","methods","console","headers","alert","c"],"sourceRoot":"src/views","sources":["StudentAddClassInfo.vue"],"sourcesContent":["<template>\n    <div class=\"add class info\">\n        \n        <form @submit.prevent=\"add\">\n            \n            <div class=\"row\">\n                <div class=\"col\" style=\"margin-left: 70px; margin-top:30px\">\n                    <label for=\"exampleFormControlInput1\">Class Number</label>\n                    <input type=\"text\" class=\"form-control\" id=\"exampleFormControlInput1\" v-model=\"input.classNumber\">\n                    <label for=\"exampleFormControlInput1\" style=\"margin-top:30px\">Invitation code</label>\n                    <input type=\"text\" class=\"form-control\" id=\"exampleFormControlInput1\" v-model=\"input.invitationCode\">\n                    </div>\n            </div>\n            <button type=\"submit\" class=\"btn btn-warning btn-md my-2 btn-block\" style=\"margin-left:70px; margin-top:30px\" @click=\"add\">Submit</button>\n            <button class=\"btn btn-warning btn-md my-2 btn-block\" style=\"margin-left:10px\" > \n                <router-link :to=\"'/StudentHome'\">Return</router-link>\n            </button>\n    </form>\n        <div class=\"alert alert-success\" v-if=\"isSuccess\" style=\"margin-top:20px\">Successfully added!</div>\n    </div>\n</template>\n<script>\n\nimport axios from 'axios'\nexport default {\n    // mounted: function(){\n    //     this.getInfo();\n    // },\n    data() {\n        return{\n            input:{\n                // term: '',\n                classNumber: '',\n                className: '',\n                invitationCode: ''\n            },\n            // username: getCookie(\"username\"), // for backend to save class info\n            isSuccess: false,\n            userId : getCookie(\"id\"),\n            couseId: this.$route.params.CLASS_ID,\n        }\n    },\n    \n    methods:{\n        \n\n        async add(){\n\n            // var data = {\n            //     userId: this.\n            // }\n\n            try{\n                console.log(this.userId); //for test\n                const response = await axios.post('http://100.25.219.17/api/user/student/addclass',{\n                userId: this.userId,\n                // term: this.input.term,\n                classNumber: this.input.classNumber,\n                // className: this.input.className,\n                invitationCode: this.input.invitationCode,\n                },\n                {\n                    headers:\n                    {\n                        'Content-type':'application/json',\n                    }\n                });\n                console.log(response.data)\n                if(response.data.isclassexisted == false)\n                {\n                    console.log('Class not exists!');\n                    alert('Class not exists!');\n                    this.isSuccess = false;\n                }\n                else\n                {\n                    if(response.data.isEnrolled == true)\n                    {\n                        console.log('You has been enrolled in this class');\n                        alert('Enrolled successfully!');\n                        this.isSuccess = false;\n                    }\n                    else{\n                        if(response.data.isCodeRight == false)\n                        {\n                            console.log('Wrong code');\n                            alert('Wrong code!');\n                            this.isSuccess = false;\n                        }\n                        else{\n                            this.isSuccess = true;    \n                        }\n                    }\n                }\n            }\n            catch(error){\n                console.log(error);\n                alert('Wrong request');\n                this.isSuccess = false;\n                return false;\n            }\n        }\n    }\n};\nfunction getCookie(cname){\n    let name = cname + \"=\";\n    let decodeCookie = decodeURIComponent(document.cookie);\n    let ca = decodeCookie.split(';');\n    for(let i = 0; i < ca.length; i++){\n        let c = ca[i];\n        while(c.charAt(0) == ' '){\n        c = c.substring(1);\n        }\n        if(c.indexOf(name) == 0){\n        return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\n// }\n</script>\n"]}]}